{% extends "base.html" %}

{% block title %}Home - Matrix-Game Evaluation{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <h1 class="text-center mb-4">Welcome to the Matrix-Game Evaluation Study</h1>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">About This Study</h5>
                <p class="card-text">
                    You will be evaluating AI-generated Minecraft gameplay videos. Each evaluation involves 
                    comparing two videos side-by-side and determining which one performs better across 
                    several quality dimensions.
                </p>
                <p class="card-text">
                    The videos are generated by AI models that attempt to create realistic Minecraft 
                    gameplay based on control inputs (keyboard and mouse actions).
                </p>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">What You'll Be Doing</h5>
                <ol>
                    <li>Watch two short videos (approximately 4 seconds each) side by side</li>
                    <li>Compare them across four dimensions:
                        <ul>
                            <li><strong>Overall Quality</strong> - General realism and believability</li>
                            <li><strong>Controllability</strong> - How well the character follows commands</li>
                            <li><strong>Visual Quality</strong> - Clarity and aesthetic appeal</li>
                            <li><strong>Temporal Consistency</strong> - Smoothness and stability over time</li>
                        </ul>
                    </li>
                    <li>Select which video performs better for each dimension</li>
                </ol>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Important Notes</h5>
                <ul>
                    <li>Each evaluation takes approximately 2-3 minutes</li>
                    <li>Please watch both videos completely before making your judgments</li>
                    <li>There are no right or wrong answers - we want your honest opinion</li>
                    <li>Use a modern browser (Chrome, Firefox, Safari) for best experience</li>
                </ul>
            </div>
        </div>
        
        <div class="text-center">
            <h5 class="mb-3">Available Evaluations</h5>
            <div id="evaluation-list" class="mb-4">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Load available evaluations
$(document).ready(function() {
    $.get('/api/comparisons', function(data) {
        const listDiv = $('#evaluation-list');
        listDiv.empty();
        
        if (data.length === 0) {
            listDiv.html('<p class="text-muted">No evaluations available at the moment.</p>');
            return;
        }
        
        const list = $('<div class="list-group">');
        data.forEach(function(comparison) {
            const item = $('<a>')
                .addClass('list-group-item list-group-item-action')
                .attr('href', comparison.evaluation_url)
                .html(`
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">Scenario: ${comparison.scenario_id}</h6>
                        <small>${comparison.num_evaluations} evaluations</small>
                    </div>
                    <small>Created: ${new Date(comparison.created_at).toLocaleDateString()}</small>
                `);
            list.append(item);
        });
        listDiv.append(list);
    });
});
</script>
{% endblock %}